set(SOURCES_FILES POLY.CPP)

set(SOURCES_FILES_ASM POLY.ASM POLYCLIP.ASM POLYDISC.ASM POLYFLAT.ASM POLYGOUR.ASM POLYGTEX.ASM POLYLINE.ASM
        POLYTEXT.ASM POLYLINE.ASM POLYTEXT.ASM POLYTEXZ.ASM POLYTZF.ASM POLYTZG.ASM POLY_HDR.ASM POLY_JMP.ASM
        TESTVUE.ASM TESTVUEF.ASM TESTVUEI.ASM)


set(SOURCES_FILES_ASM_EXCLUDED TESTVUEM.ASM)

add_library(poly ${SOURCES_FILES} ${SOURCES_FILES_ASM})
target_compile_definitions(poly PRIVATE _BUILDING_LIB LIB_LOCAL)

# Configure all ASM files to be recognized as such (workaround for bug where .ASM uppercase extension is not recognized)
foreach (FILE_ASM IN LISTS SOURCES_FILES_ASM)
    set_source_files_properties(${FILE_ASM} PROPERTIES LANGUAGE ASM_MASM)
endforeach ()
